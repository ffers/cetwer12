{% extends 'cabinet_client/Products/layout/base.html' %} {% block title %}Прихід Товару{% endblock %}

{% block head %}
<!-- Підключення стилів Flatpickr -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/update_order.css') }}">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/dark.css">

{% endblock %}

{% block body %}
	<div class="content">
		<h1 style="text-align: center;">
            Змінити Ісходник
        </h1>
            <nav class="nav">
            
                <div class="button-pult">
                    <button type="button" onclick="confirmDelete({{item.id}}, '/cabinet/source/delete/')" 
                        class="btn btn-outline-info my-2 my-sm-0">
                            Видалити Ісходник
                    </button>
                </div>
            </nav><br> 
		
			<form action="/cabinet/source/update/{{item.id}}" method="post">
                <div id="product-container">
                    <div class="row">   
                        <div class="col-sm col-lg-2">
                            <!-- Include input field with id so 
                                that we can use it in JavaScript 
                                to set attributes.-->
                            <input class="form-control" 
                                type="text" id="event_date" name="event_date"/>                       
                        </div>
                    
                        <script>
                            flatpickr('#event_date', {
                            dateFormat: 'd-m-Y', // Формат дати
                            allowInput: true,
                            defaultDate: 'today', 
                            });
                        </script>
                      
        
                        <!-- Товар та кількість -->
                        <div class="col-sm col-lg-2">
                            <input 
                            placeholder="Артікул" 
                            class="form-control" 
                            style="text-align: center;" 
                            id="article" 
                            name="article" 
                            value="{{item.article}}"                   
                            > 
                        </div>
                            <br>
                        <div class="col-sm">
                            <input 
                                placeholder="Назва" 
                                class="form-control  " 
                                style="text-align: center;" 
                                id="name" 
                                name="name"
                                value="{{item.name}}"
                                > 
                                <br>
                        </div>
                        <div class="col-sm col-lg-2">
                            <input 
                                placeholder="Ціна" 
                                class="form-control" 
                                style="text-align: center;" 
                                id="price" 
                                name="price"    
                                value="{{item.price}}"                
                                > 
                                <br>
                        </div>
                        <div class="col-sm col-lg-2">
                            <input style="display: none;"
                             class="quantity form-control" 
                            id="quantity" name="quantity"  min="1" max="10000" 
                            placeholder="* Кількість" required
                            value="{{item.quantity}}"><br>
                        </div>
                        
                    </div>                
                </div></br>

            <div class="row">
                <div class="col-sm"></div>
                <div class="col-sm"><input type="button" class="text-button"  value="Додати Компонент" id="addButton"></div>
				<div class="col-sm"><input type="button" class="text-button"  value="Створити товар" data-bs-toggle="modal" data-bs-target="#myModal" ></div>
                <!-- <div class="col-sm"><a href="get_product/send_with_prom_test">Підвердити</a></div> -->
            </div><br>
            <div class="center">
			    <button class="button button--primary button--large" type="submit">Змінити</button>
            </div>
            {% for relate in item.product_relate %}
			<div class="row" id="relate">
				<!-- <button type="button" onclick="confirmDelete({{ relate.id }})" 
					class="btn    my-sm-0" style="color: #626870;">
						Видалити Компонент
				</button> -->
				<script>
					function confirmDelete(id) {
						// Викликаємо модальне вікно підтвердження
						if (confirm("Ви впевнені, що хочете видалити компонент?")) {
							// Якщо користувач натиснув "OK", видалити елемент
							window.location.href = "/cabinet/products/delete_relate/" + id;
						} else {
							// Якщо користувач натиснув "Скасувати", нічого не робимо
							return false;
						} 
					}

					function deleteElement() { 
						// Видалення елементу
						// Наприклад, можна використати jQuery для цього: $('#elementId').remove();
					}
				</script>
				<input style="display:none" name="source_id" rows="1" cols="50" 
				placeholder="* Артікул"	value="{{ relate.products.id }}">
				<div class="row">
					<div class="col-sm"><footer>
						<small class="text-muted">Артікул</small></footer>
						<input class="form-control bg-light" name="relate_article" 
						rows="1" cols="50" 
						placeholder="* Назва" value="{{relate.products.article}} - {{relate.products.product_name}}"><br></div>
					</div>
					<div class="row">
						<div class="col-sm">
							<footer><small class="text-muted">Кількість</small></footer>
							<input class="form-control bg-light" name="relate_quantity" 
							rows="1" cols="50" placeholder="* Артікул"	value="{{relate.quantity}}">
						<br>
					</div>
				</div>
			</div>
			
		{% endfor %}
		
		{% if not item.product_relate %}
		<div class="row">
			<h3 style="text-align: center;">
				Нет Компонентов
			</h3>
		</div>
        {% endif %}
		</form>



	</div>

	<script type="module" src="{{url_for('static', filename='javascript/calculate.js')}}"></script>
    <script src="{{url_for('static', filename='javascript/add-select2.js')}}"></script>
    <script src="{{url_for('static', filename='javascript/confirmDelete.js')}}"></script>
    <script src="{{url_for('static', filename='javascript/hiddenElement.js')}}"></script>
    <script src="{{url_for('static', filename='javascript/submitFormSelect2.js')}}"></script>
    <script type="module" src="{{url_for('static', filename='javascript/add_product_arrival.js')}}"></script>
    <script src="{{url_for('static', filename='javascript/modal-window.js')}}"></script>
{% endblock %}